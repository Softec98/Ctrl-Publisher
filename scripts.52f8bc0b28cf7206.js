!function(L,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.vanillaTextMask=r():L.vanillaTextMask=r()}(this,function(){return function(L){function r(m){if(d[m])return d[m].exports;var u=d[m]={exports:{},id:m,loaded:!1};return L[m].call(u.exports,u,u.exports,r),u.loaded=!0,u.exports}var d={};return r.m=L,r.c=d,r.p="",r(0)}([function(L,r,d){"use strict";function m(a){return a&&a.__esModule?a:{default:a}}function u(a){var n=a.inputElement,l=(0,W.default)(a),e=function(p){return l.update(p.target.value)};return n.addEventListener("input",e),l.update(n.value),{textMaskInputElement:l,destroy:function(){n.removeEventListener("input",e)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.conformToMask=void 0,r.maskInput=u;var c=d(2);Object.defineProperty(r,"conformToMask",{enumerable:!0,get:function(){return m(c).default}});var W=m(d(5));r.default=u},function(L,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.placeholderChar="_",r.strFunction="function"},function(L,r,d){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};r.default=function m(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,c.isArray)(l)){if((void 0===l?"undefined":u(l))!==j.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");l=l(n,e),l=(0,c.processCaretTraps)(l).maskWithoutCaretTraps}var p=e.guide,o=void 0===p||p,T=e.previousConformedValue,v=void 0===T?a:T,Y=e.placeholderChar,M=void 0===Y?j.placeholderChar:Y,z=e.placeholder,w=void 0===z?(0,c.convertMaskToPlaceholder)(l,M):z,t=e.currentCaretPosition,f=e.keepCharPositions,k=!1===o&&void 0!==v,g=n.length,S=v.length,s=w.length,H=l.length,V=g-S,J=V>0,h=t+(J?-V:0),q=h+Math.abs(V);if(!0===f&&!J){for(var O=a,A=h;A<q;A++)w[A]===M&&(O+=M);n=n.slice(0,h)+O+n.slice(h,g)}for(var E=n.split(a).map(function(_,I){return{char:_,isNew:I>=h&&I<q}}),y=g-1;y>=0;y--){var i=E[y].char;if(i!==M){var U=y>=h&&S===H;i===w[U?y-V:y]&&E.splice(y,1)}}var x=a,X=!1;e:for(var F=0;F<s;F++){var G=w[F];if(G===M){if(E.length>0)for(;E.length>0;){var K=E.shift(),Z=K.char,R=K.isNew;if(Z===M&&!0!==k){x+=M;continue e}if(l[F].test(Z)){if(!0===f&&!1!==R&&v!==a&&!1!==o&&J){for(var Q=E.length,$=null,N=0;N<Q;N++){var D=E[N];if(D.char!==M&&!1===D.isNew)break;if(D.char===M){$=N;break}}null!==$?(x+=Z,E.splice($,1)):F--}else x+=Z;continue e}X=!0}!1===k&&(x+=w.substr(F,s));break}x+=G}if(k&&!1===J){for(var P=null,b=0;b<x.length;b++)w[b]===M&&(P=b);x=null!==P?x.substr(0,P+1):a}return{conformedValue:x,meta:{someCharsRejected:X}}};var c=d(3),j=d(1),W=[],a=""},function(L,r,d){"use strict";function u(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}Object.defineProperty(r,"__esModule",{value:!0}),r.convertMaskToPlaceholder=function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.placeholderChar;if(!u(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(p))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(p)+"\n\nThe mask that was received is: "+JSON.stringify(e));return e.map(function(o){return o instanceof RegExp?p:o}).join("")},r.isArray=u,r.isString=function c(e){return"string"==typeof e||e instanceof String},r.isNumber=function j(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},r.processCaretTraps=function W(e){for(var p=[],o=void 0;-1!==(o=e.indexOf(l));)p.push(o),e.splice(o,1);return{maskWithoutCaretTraps:e,indexes:p}};var a=d(1),n=[],l="[]"},function(L,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function d(c){var j=c.previousConformedValue,W=void 0===j?u:j,a=c.previousPlaceholder,n=void 0===a?u:a,l=c.currentCaretPosition,e=void 0===l?0:l,p=c.conformedValue,o=c.rawValue,T=c.placeholderChar,v=c.placeholder,Y=c.indexesOfPipedChars,M=void 0===Y?m:Y,z=c.caretTrapIndexes,w=void 0===z?m:z;if(0===e||!o.length)return 0;var f=W.length,k=v.length,g=p.length,S=o.length-f,s=S>0;if(S>1&&!s&&0!==f)return e;var h=0,q=void 0,O=void 0;if(!s||W!==p&&p!==v){var A=p.toLowerCase(),i=o.toLowerCase().substr(0,e).split(u).filter(function(C){return-1!==A.indexOf(C)});O=i[i.length-1];var U=n.substr(0,i.length).split(u).filter(function(C){return C!==T}).length,x=v.substr(0,i.length).split(u).filter(function(C){return C!==T}).length;!s&&(x!==U||void 0!==n[i.length-1]&&void 0!==v[i.length-2]&&n[i.length-1]!==T&&n[i.length-1]!==v[i.length-1]&&n[i.length-1]===v[i.length-2])&&U>0&&v.indexOf(O)>-1&&void 0!==o[e]&&(q=!0,O=o[e]);for(var K=M.map(function(C){return A[C]}).filter(function(C){return C===O}).length,Z=i.filter(function(C){return C===O}).length,Q=v.substr(0,v.indexOf(T)).split(u).filter(function(C,B){return C===O&&o[B]!==C}).length+Z+K+(q?1:0),$=0,N=0;N<g&&(h=N+1,A[N]===O&&$++,!($>=Q));N++);}else h=e-S;if(s){for(var P=h,b=h;b<=k;b++)if(v[b]===T&&(P=b),v[b]===T||-1!==w.indexOf(b)||b===k)return P}else if(q){for(var _=h-1;_>=0;_--)if(p[_]===O||-1!==w.indexOf(_)||0===_)return _}else for(var I=h;I>=0;I--)if(v[I-1]===T||-1!==w.indexOf(I)||0===I)return I};var m=[],u=""},function(L,r,d){"use strict";function m(t){return t&&t.__esModule?t:{default:t}}function c(t,f){document.activeElement===t&&(z?w(function(){return t.setSelectionRange(f,f,Y)},0):t.setSelectionRange(f,f,Y))}function j(t){if((0,o.isString)(t))return t;if((0,o.isNumber)(t))return String(t);if(null==t)return v;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(t))}Object.defineProperty(r,"__esModule",{value:!0});var W=Object.assign||function(t){for(var f=1;f<arguments.length;f++){var k=arguments[f];for(var g in k)Object.prototype.hasOwnProperty.call(k,g)&&(t[g]=k[g])}return t},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.default=function u(t){var f={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:f,update:function(k){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,S=g.inputElement,s=g.mask,H=g.guide,V=g.pipe,J=g.placeholderChar,h=void 0===J?T.placeholderChar:J,q=g.keepCharPositions,O=void 0!==q&&q,A=g.showMask,E=void 0!==A&&A;if(void 0===k&&(k=S.value),k!==f.previousConformedValue){(void 0===s?"undefined":a(s))===M&&void 0!==s.pipe&&void 0!==s.mask&&(V=s.pipe,s=s.mask);var y=void 0,i=void 0;if(s instanceof Array&&(y=(0,o.convertMaskToPlaceholder)(s,h)),!1!==s){var U=j(k),x=S.selectionEnd,X=f.previousConformedValue,F=f.previousPlaceholder,G=void 0;if((void 0===s?"undefined":a(s))===T.strFunction){if(!1===(i=s(U,{currentCaretPosition:x,previousConformedValue:X,placeholderChar:h})))return;var K=(0,o.processCaretTraps)(i),Z=K.maskWithoutCaretTraps,R=K.indexes;G=R,y=(0,o.convertMaskToPlaceholder)(i=Z,h)}else i=s;var Q={previousConformedValue:X,guide:H,placeholderChar:h,pipe:V,placeholder:y,currentCaretPosition:x,keepCharPositions:O},$=(0,p.default)(U,i,Q),N=$.conformedValue,D=(void 0===V?"undefined":a(V))===T.strFunction,P={};D&&(!1===(P=V(N,W({rawValue:U},Q)))?P={value:X,rejected:!0}:(0,o.isString)(P)&&(P={value:P}));var b=D?P.value:N,_=(0,l.default)({previousConformedValue:X,previousPlaceholder:F,conformedValue:b,placeholder:y,rawValue:U,currentCaretPosition:x,placeholderChar:h,indexesOfPipedChars:P.indexesOfPipedChars,caretTrapIndexes:G}),I=b===y&&0===_,C=E?y:v,B=I?C:b;f.previousConformedValue=B,f.previousPlaceholder=y,S.value!==B&&(S.value=B,c(S,_))}}}}};var l=m(d(4)),p=m(d(2)),o=d(3),T=d(1),v="",Y="none",M="object",z="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),w="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout}])});